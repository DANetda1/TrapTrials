# ADR-002 — Управление секретами и настройками через окружение

## Context
Нужен единый способ конфигурации без хардкода секретов/ключей. Используем Pydantic BaseSettings для чтения из переменных окружения/`.env`.

Связи:
- P03 / NFR-5 «Безопасное хранение секретов».
- P04 / узел App; RISKS: R5 (CVE/секреты).

## Decision
1. Ввести `app/settings.py` с `BaseSettings`, напр. `ADMIN_TOKEN: str | None = None`, `ALLOWED_ORIGINS: list[str] = [...]`.
2. Не логировать значения секретов; в логи — только факты конфигурации.
3. Чтение настроек при старте приложения.

## Alternatives
- **Хардкод в коде.** +Просто; −Высокий риск и нарушения практик.
- **Хранение в менеджере секретов (Vault).** +Лучше для прод; −Сложнее для учебного окружения. Можно рассмотреть позже.

## Consequences / Security impact
- Секреты вне кода и Git, согласуется с NFR-5.
- Повышение гибкости настройки (CORS, лимиты и пр.).

## Rollout plan (DoD)
- `app/settings.py` добавлен; чтение из env.
- Тесты: загрузка значения из временного env.
- CI зелёный; PR включает ссылку на ADR.

## Links
- NFR: NFR-5 (P03)
- RISKS: R5 (P04)
- Tests: `tests/test_security_p05.py::test_settings_load_from_env`

